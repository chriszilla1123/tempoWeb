webpackJsonp([0],{"+itF":function(t,e){},0:function(t,e){},Kn8m:function(t,e){},MR2O:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW");var i={test(t){alert(t)},getAlbumIDsByArtistID(t,e,s){let a=[];return t=parseInt(t),s.forEach(function(e){e.artist===t&&a.push(e.id)}),a},getSongIDsByAlbumID(t,e,s){let a=[];return t=parseInt(t),s.forEach(function(e){e.album===t&&a.push(e.id)}),a}};let r=new Audio,n="http://www.chrisco.top:8000",o=[],l=-1,c=-1,d=[],u=[],m=[],v=[],g=[],p=[],h=[];var b={name:"tempo",data:function(){return{artistList:u,albumList:m,songList:v}},methods:{playSongById(t){let e=o.indexOf(parseInt(t));c=o.length>=e+1?o[e+1]:-1,r.pause(),r.src=n+"/getSongById/"+t,r.load(),r.play(),l=parseInt(t),this.writeCurrentPlayingInfo(t)},setSongSet(t){o=t},setBrowsingSongSet(t){d=t},writeCurrentPlayingInfo(t){t=parseInt(t);let e=-1,s=-1,a="",i="",r="";if(0!==h.length&&!(t<1||t>h.length)){for(let a=0;a<h.length;a++)if(h[a].id===t){e=h[a].album,s=h[a].artist;break}for(let e=0;e<h.length;e++)if(h[e].id===t){a=h[e].title;break}if(-1!==e&&-1!==s){for(let t=0;t<p.length;t++)if(p[t].id===e){i=p[t].album;break}for(let t=0;t<g.length;t++)if(g[t].id===s){r=g[t].artist;break}""!==a&&""!==i&&""!==r&&(document.getElementById("cur-song").innerHTML=a,document.getElementById("cur-album").innerHTML=i,document.getElementById("cur-artist").innerHTML=r)}}},control_play(t){r.paused?(t.setAttribute("data-icon","u"),r.play()):(t.setAttribute("data-icon","P"),r.pause())},control_stop(t){t.setAttribute("data-icon","P"),r.pause(),r.currentTime=0},control_next(){let t=c,e=o.indexOf(parseInt(t));-1!==t?(c=o.length>=e+1?o[e+1]:-1,this.playSongById(t),l=parseInt(t)):console.log("Hit end of queue")},control_back(){if(r.currentTime>=3)return r.pause(),r.currentTime=0,void r.play();let t=o.indexOf(parseInt(l));if(t-1>=0&&t-1<=o.length){c=l;let e=o[t-1];this.playSongById(e),l=parseInt(e)}},updatePlayerTime(t,e,s,a){let i,n,o,l,c=Math.floor(r.currentTime/60),d=Math.floor(r.currentTime-60*c);o=(i=c<10?"0"+c:c)+":"+(n=d<10?"0"+d:d),s.textContent=o,l=t.clientWidth*(r.currentTime/r.duration),e.style.width=l+"px";let u=Math.floor(r.duration/60),m=Math.floor(r.duration-60*u);u<10&&(u="0"+u),m<10&&(m="0"+m),isNaN(u)&&(u="00"),isNaN(m)&&(m="00"),a.textContent=u.toString()+":"+m.toString()},getDBTables(t){this.$http.get(n+"/getArtists").then(e=>{g=e.body,this.$http.get(n+"/getAlbums").then(e=>{p=e.body,this.$http.get(n+"/getSongs").then(e=>{h=e.body,t()},t=>{console.log("Error: "+t.body)})},t=>{console.log("Error: "+t.body)})},t=>{console.log("Error: "+t.body)})},arrayBuilder:(t,e)=>Array.from(new Array(e-t),(e,s)=>s+t),openArtistBrowser(t){let e;e=t.hasOwnProperty("showAll")&&!0===t.showAll?this.arrayBuilder(1,g.length+1):t.hasOwnProperty("artistList")&&typeof t.artistList==typeof[]&&t.artistList.length>0?t.artistList:this.arrayBuilder(1,g.length+1),this.$router.push({name:"artistBrowser",params:{tempo:this,artistList:e,artistsDB:g,albumsDB:p,songsDB:h}})},openAlbumBrowser(t){let e,s=void 0;e=t.hasOwnProperty("showAll")&&!0===t.showAll?this.arrayBuilder(1,p.length+1):t.hasOwnProperty("albumList")&&typeof t.albumList==typeof[]&&t.albumList.length>0?t.albumList:this.arrayBuilder(1,p.length+1),t.hasOwnProperty("label")&&"string"==typeof t.label&&(s=t.label),this.$router.push({name:"albumBrowser",params:{tempo:this,albumList:e,typeLabel:s,artistsDB:g,albumsDB:p,songsDB:h}})},openSongBrowser(t,e=!1,s){!0===e&&(t=this.arrayBuilder(1,h.length+1)),this.$router.push({name:"songBrowser",params:{tempo:this,songList:t,typeLabel:s,artistsDB:g,albumsDB:p,songsDB:h}})},getAlbumIDsByArtistID:t=>i.getAlbumIDsByArtistID(t,g,p),getSongIDsByAlbumID:t=>i.getSongIDsByAlbumID(t,p,h)},mounted:function(){console.log("Page loaded");let t=this;t.getDBTables(function(){t.openArtistBrowser({showAll:!0})}),document.getElementById("home").onclick=function(){},r.addEventListener("ended",function(){});let e=document.querySelector("audio"),s=document.querySelector(".controls"),a=document.querySelector(".play"),i=document.querySelector(".stop"),n=document.querySelector(".next"),o=document.querySelector(".back"),l=document.querySelector(".timer"),c=document.querySelector(".timerText"),d=document.querySelector(".timeEnd"),u=document.querySelector(".timer div");e.removeAttribute("controls"),s.style.visibility="visible",a.addEventListener("click",function(){t.control_play(a)}),i.addEventListener("click",function(){t.control_stop(a)}),n.addEventListener("click",function(){t.control_next()}),o.addEventListener("click",function(){t.control_back()}),r.addEventListener("timeupdate",function(){t.updatePlayerTime(l,u,c,d)});let m=l.getBoundingClientRect();document.onclick=function(t){if(t.x>=m.left&&t.x<=m.right&&t.y>=m.top&&t.y<=m.bottom&&!r.paused){let e=m.right-m.left,s=(t.x-m.left)/e,a=r.duration;r.currentTime=a*s,r.play()}}}},y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main-page"}},[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-dark"},[s("div",{staticClass:"navbar-brand",attrs:{id:"home"}},[t._v("Tempo Web")]),t._v(" "),s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[s("ul",{staticClass:"navbar-nav"},[s("div",{staticClass:"container",attrs:{id:"controlHolder"}},[s("audio",{attrs:{controls:""}}),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"controls"},[s("button",{staticClass:"back control-button",attrs:{"data-icon":"B","aria-label":"rewind"}}),t._v(" "),s("button",{staticClass:"play control-button",attrs:{"data-icon":"P","aria-label":"play pause toggle"}}),t._v(" "),s("button",{staticClass:"stop control-button",attrs:{"data-icon":"S","aria-label":"stop"}}),t._v(" "),s("button",{staticClass:"next control-button",attrs:{"data-icon":"F","aria-label":"fast forward"}})])]),t._v(" "),s("div",{staticClass:"row timer"},[s("div",{staticClass:"timerBar"}),t._v(" "),s("span",{staticClass:"timerText"},[t._v("00:00")]),t._v(" "),s("span",{staticClass:"timeEnd"},[t._v("00:00")])])])]),t._v(" "),s("ul",{staticClass:"navbar-nav"},[s("div",{staticClass:"container",attrs:{id:"playingInfo"}},[s("div",{staticClass:"row",attrs:{id:"cur-song"}}),t._v(" "),s("div",{staticClass:"row",attrs:{id:"cur-album"}}),t._v(" "),s("div",{staticClass:"row",attrs:{id:"cur-artist"}})])]),t._v(" "),s("ul",{staticClass:"navbar-nav"},[s("button",[t._v("Artists")]),t._v(" "),s("button",[t._v("Albums")]),t._v(" "),s("button",[t._v("Songs")])]),t._v(" "),s("form",{staticClass:"form-inline mt-2 mt-md-0",attrs:{id:"searchForm"}},[s("input",{staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search",id:"searchBar"}}),t._v(" "),s("button",{staticClass:"btn btn-outline-success my-2 my-sm-0",attrs:{type:"submit",id:"searchButton"}},[t._v("Search")])])])])])}]};var f={name:"app",components:{tempo:s("VU/8")(b,y,!1,function(t){s("oUUa")},"data-v-87dec000",null).exports},methods:{}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("tempo"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var A=s("VU/8")(f,B,!1,function(t){s("Kn8m")},null,null).exports,_=s("/ocq"),w=(s("VU/8")(null,null,!1,null,null,null).exports,{name:"artistBrowser",props:{tempo:Object,artistList:Array,artistsDB:Array,albumsDB:Array,songsDB:Array},methods:{writeArtists(t,e,s){let a='<div class="container">';a+='<div class="row" id="artistHeader"><div class="col-1"></div><div class="col artistHeader">Artist</div><div class="col-1">Albums</div><div class="col-1">Songs</div><div class="col-1">Controls</div></div>';for(let s=0;s<t.length;s++){let i=t[s],r=i-1,n=e[r].artist.toString(),o=e[r].numAlbums.toString(),l=e[r].numSongs.toString();a+='<div class="row artistLinkContainer" tag="ArID_'+i+'"><div class="col-1 artistLink" tag="ArID_'+i+'">'+(s+1).toString()+'</div><div class="col artistLink" tag="ArID_'+i+'">'+n+'</div><div class="col-1 artistLink" tag="ArID_'+i+'">'+o+'</div><div class="col-1 artistLink" tag="ArID_'+i+'">'+l+'</div><div class="col-1 artistAlbumControls" tag="ArID_'+i+'" title="Play All"><i class="allSongsByArtist fas fa-play"></i> <i class="editArtist fas fa-cog"></i></div></div>'}a+="</div>",document.getElementById("artistBrowserContent").innerHTML=a,this.addArtistListeners(s,e)},addArtistListeners(t,e){let s=document.getElementsByClassName("artistLink"),a=document.getElementsByClassName("allSongsByArtist");document.getElementsByClassName("editArtist");for(let a=0;a<s.length;a++){s[a].addEventListener("click",function(){let s=this.attributes.tag.nodeValue.split("ArID_")[1],a=t.getAlbumIDsByArtistID(s),i=e[s-1].artist;t.openAlbumBrowser({albumList:a,label:i})})}for(let t=0;t<a.length;t++){let e=this;a[t].addEventListener("click",function(){songSet=[];for(let t=0;t<songsDB.length;t++){let e=parseInt(this.parentElement.attributes.tag.nodeValue.split("ArID_")[1]);songsDB[t].artist===e&&songSet.push(songsDB[t].id)}let t=songSet[0];e.playSongById(t)})}}},mounted:function(){window.history.replaceState([],"/","/");let t=this.tempo,e=this.artistList,s=this.artistsDB;this.albumsDB,this.songsDB;this.writeArtists(e,s,t)}}),L={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"artist-browser"}},[e("h1",{attrs:{id:"typeLabel"}},[this._v("Artists")]),this._v(" "),e("div",{attrs:{id:"artistBrowserContent"}})])}]};var S=s("VU/8")(w,L,!1,function(t){s("MR2O")},"data-v-4da66996",null).exports,D={name:"albumBrowser",props:{tempo:Object,albumList:Array,typeLabel:String,artistsDB:Array,albumsDB:Array,songsDB:Array},methods:{writeAlbums(t,e,s,a){let i='<div class="container">';i+='<div class="row" id="albumHeader"><div class="col-1"></div><div class="col">Album</div><div class="col">Artist</div><div class="col-1">Songs</div><div class="col-1">Controls</div></div>';for(let a=0;a<t.length;a++){let r=t[a],n=r-1,o=e[n].album,l=s[e[n].artist-1].artist,c=e[n].numSongs.toString();i+='<div class="row albumLink" tag="AlID_'+r+'"><div class="col-1">'+(a+1).toString()+'</div><div class="col">'+o+'</div><div class="col">'+l+'</div><div class="col-1">'+c+'</div><i class="AllSongsByArtist fas fa-play col-1"></i></div>'}i+="</div>",document.getElementById("albumBrowserContent").innerHTML=i,this.addAlbumListeners(a)},addAlbumListeners(t){let e=document.getElementsByClassName("albumLink");document.getElementsByClassName("allSongsByAlbum");for(let s=0;s<e.length;s++){e[s].addEventListener("click",function(){let e=this.attributes.tag.nodeValue.split("AlID_")[1],s=t.getSongIDsByAlbumID(e);t.openSongBrowser(s)})}}},mounted:function(){window.history.replaceState([],"/","/");let t=this.tempo,e=this.albumList;typeLabel=this.typeLabel;let s=this.artistsDB,a=this.albumsDB;this.songsDB;this.writeAlbums(e,a,s,t),void 0!==typeLabel&&(document.getElementById("typeLabel").innerHTML=typeLabel.toString())}},I={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"album-browser"}},[e("h1",{attrs:{id:"typeLabel"}},[this._v("Albums")]),this._v(" "),e("div",{attrs:{id:"albumBrowserContent"}})])}]};var C=s("VU/8")(D,I,!1,function(t){s("x4Zk")},"data-v-03679a76",null).exports,E={name:"songBrowser",props:{tempo:Object,songList:Array,typeLabel:String,artistsDB:Array,albumsDB:Array,songsDB:Array},methods:{writeSongs(t,e,s,a,i){let r='<div class="container"><div class="row" id="songHeader"><div class="col-1"></div><div class="col">Title</div><div class="col">Artist</div><div class="col">Album</div></div>';for(let i=0;i<t.length;i++){let n=t[i],o=n-1,l=e[o].title,c=e[o].album,d=e[o].artist,u=s[c-1].album,m=a[d-1].artist;r+='<div class="row songLink align-middle" tag="SoID_'+n+'"><div class="col-1">'+(i+1).toString()+'</div><div class="col">'+l+'</div><div class="col">'+m+'</div><div class="col">'+u+"</div></div>"}r+="</div>",document.getElementById("songBrowserContent").innerHTML=r,this.addSongListeners(t,i)},addSongListeners(t,e){let s=document.getElementsByClassName("songLink");for(let a=0;a<s.length;a++){s[a].addEventListener("click",function(){console.log(this);let s=this.attributes.tag.nodeValue.split("SoID_")[1];e.playSongById(s),e.setSongSet(t)})}}},mounted:function(){window.history.replaceState([],"/","/");let t=this.tempo,e=this.songList,s=this.artistsDB,a=this.albumsDB,i=this.songsDB,r=this.typeLabel;this.writeSongs(e,i,a,s,t),t.setBrowsingSongSet(e),void 0!==r&&(document.getElementById("typeLabel").innerHTML=r.toString())}},k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"song-browser"}},[e("h1",{attrs:{id:"typeLabel"}},[this._v("Songs")]),this._v(" "),e("div",{attrs:{id:"songBrowserContent"}})])}]};var x=s("VU/8")(E,k,!1,function(t){s("+itF")},"data-v-60068240",null).exports;a.a.use(_.a);var T=new _.a({routes:[{path:"/artists",name:"artistBrowser",component:S,props:!0},{path:"/albums",name:"albumBrowser",component:C,props:!0},{path:"/songs",name:"songBrowser",component:x,props:!0}],mode:"history"}),H=s("8+8L");a.a.config.productionTip=!1,a.a.use(H.a),new a.a({el:"#app",router:T,components:{App:A},template:"<App/>"})},oUUa:function(t,e){},x4Zk:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.14aef3524a0b65d3852a.js.map